<!doctype html><html lang=en-us><head><meta charset=utf-8><title>SSH General Reference | Dan Aukes </title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Dan Aukes' personal website"><meta name=author content="Dan Aukes"><meta name=generator content="Hugo 0.147.3"><link rel=stylesheet href=https://www.danaukes.com/plugins/glightbox/css/glightbox.css><link rel=stylesheet href=https://www.danaukes.com/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://www.danaukes.com/plugins/slick/slick.css><link rel=stylesheet href=https://www.danaukes.com/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://www.danaukes.com/plugins/venobox/venobox.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link rel=stylesheet href=https://www.danaukes.com/scss/style.min.css media=screen><link rel="shortcut icon" href=https://www.danaukes.com/images/favicon.png type=image/x-icon><link rel=icon href=https://www.danaukes.com/images/favicon.png type=image/x-icon><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","","auto"),ga("send","pageview")</script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body><div class=preloader></div><header class=navigation><div class=container><nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom pl-0"><a class="navbar-brand mobile-view" href=https://www.danaukes.com/><img class=img-fluid src=https://www.danaukes.com/da-small.png alt="Dan Aukes"></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation>
<i class=ti-menu></i></button><div class="collapse navbar-collapse text-center" id=navigation><div class=desktop-view><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=https://github.com/danb0b><i class=ti-github></i></a></li><li class=nav-item><a class=nav-link href=https://www.linkedin.com/in/dan-aukes-502995212/><i class=ti-linkedin></i></a></li></ul></div><a class="navbar-brand mx-auto desktop-view" href=https://www.danaukes.com/><img class=img-fluid src=https://www.danaukes.com/da-small.png alt="Dan Aukes"></a><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://www.danaukes.com/work-blog/>Work Blog</a></li><li class=nav-item><a class=nav-link href=https://www.danaukes.com/notebook/>Notebook</a></li><li class=nav-item><a class=nav-link href=https://www.danaukes.com/travel/>Travel</a></li><li class=nav-item><a class=nav-link href=https://www.danaukes.com/recipes/>Recipes</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Misc</a><div class=dropdown-menu><a class=dropdown-item href=https://www.danaukes.com/code/>Code</a>
<a class=dropdown-item href=https://www.danaukes.com/websites/>Websites</a>
<a class=dropdown-item href=https://www.danaukes.com/bookmarks/>Bookmarks</a></div></li></ul><form action=https://www.danaukes.com//search class=d-flex><input class="form-control me-2" id=search-query name=s type=s placeholder=Search aria-label=Search>
<button class="btn btn-outline-success" type=submit><i class="ti-search text-dark"></i></button></form></div></nav></div></header><section class=section-sm><div class=container><div class=row><div class="col-lg-8 mx-auto"><div class=text-center><nav aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=https://www.danaukes.com/>Welcome</a></li><li class=breadcrumb-item><a href=https://www.danaukes.com/notebook/>Notebook</a></li><li class=breadcrumb-item><a href=https://www.danaukes.com/notebook/ssh/>SSH, Keys, and GPG</a></li><li class="breadcrumb-item active"><a href=https://www.danaukes.com/notebook/ssh/ssh-reference/>SSH General Reference</a></li></ol></nav></div><h2>SSH General Reference</h2><div class="mb-1 post-meta"><span>By Dan Aukes</span></div><ul class=list-inline><li class="list-inline-item mb-3 mr-2 mt-1"><a class="d-block p-2 bg-primary text-white" href=/tags/ubuntu class=text-primary>Ubuntu</a></li><li class="list-inline-item mb-3 mr-2 mt-1"><a class="d-block p-2 bg-primary text-white" href=/tags/linux class=text-primary>Linux</a></li><li class="list-inline-item mb-3 mr-2 mt-1"><a class="d-block p-2 bg-primary text-white" href=/tags/ssh class=text-primary>SSH</a></li><li class="list-inline-item mb-3 mr-2 mt-1"><a class="d-block p-2 bg-primary text-white" href=/tags/encryption class=text-primary>Encryption</a></li><li class="list-inline-item mb-3 mr-2 mt-1"><a class="d-block p-2 bg-primary text-white" href=/tags/keys class=text-primary>Keys</a></li></ul><div class="content mb-5"><h2 id=what-is-ssh>What is SSH</h2><p>A way of securely and remotely connecting to another computer over tcp.</p><h2 id=ssh-client>SSH Client</h2><p>Common command form</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh user@&lt;server-or-ip&gt; -p &lt;portnum&gt; -i &lt;identity/file/path&gt;
</span></span></code></pre></div><h3 id=ssh-one-liner>SSH One-liner</h3><p>you can run a single command on a remote machine like this</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh user@server <span style=color:#d88200>&#39;command&#39;</span>
</span></span></code></pre></div><p>for example:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh danaukes@mycomputer <span style=color:#d88200>&#39;echo &#34;Hello World&#34;&gt;&gt;test.txt&#39;</span>
</span></span></code></pre></div><h3 id=common-arguments>Common arguments</h3><ul><li><code>-p</code>: port number</li><li><code>-i</code>: identity path file</li><li><code>-v</code> / <code>-vv</code> / <code>-vvv</code> / <code>-vvvv</code>: levels of &ldquo;verbosity&rdquo;</li><li><code>-o</code>: options you can specify</li></ul><h3 id=ssh-client-configuration>SSH Client Configuration</h3><p>You can configure your ssh client on a per-server basis with the .ssh/config file</p><blockquote><p>Note: this is an example, don&rsquo;t just copy/paste</p></blockquote><p>Below we see an example</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>Host &lt;name or *&gt;
</span></span><span style=display:flex><span>    # if you want to restrict your ssh client to only using keys
</span></span><span style=display:flex><span>    IdentitiesOnly yes 
</span></span><span style=display:flex><span>    # supply the default path to your identity file (key)
</span></span><span style=display:flex><span>    IdentityFile &lt;path/to/new_file&gt;
</span></span><span style=display:flex><span>    # default username
</span></span><span style=display:flex><span>    User &lt;username&gt;
</span></span><span style=display:flex><span>    # 
</span></span><span style=display:flex><span>    ForwardAgent yes # set this option carefully
</span></span><span style=display:flex><span>    AddKeysToAgent yes # set this option carefully
</span></span><span style=display:flex><span>    ...many other options
</span></span></code></pre></div><p>The first entry to match will be used, so make sure you put more general rules, such as <code>Host *</code> at the end.</p><p>you can find more info here:</p><ul><li><a href=https://linuxhandbook.com/ssh-config-file/>https://linuxhandbook.com/ssh-config-file/</a></li><li><a href=https://www.ssh.com/academy/ssh/config>https://www.ssh.com/academy/ssh/config</a></li><li><a href=https://linuxize.com/post/using-the-ssh-config-file/>https://linuxize.com/post/using-the-ssh-config-file/</a></li></ul><p>or by typing</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>man ssh_config
</span></span></code></pre></div><h2 id=ssh-keys>SSH Keys</h2><h1 id=create-a-new-ssh-key>Create a new SSH key</h1><ol><li><p>Use a key like &ldquo;ed25519&rdquo;</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh-keygen -t ed25519 -f &lt;path/to/key&gt;
</span></span></code></pre></div></li><li><p>Select a passphrase</p></li><li><p>print the public key:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat &lt;path/to/key&gt;.pub
</span></span></code></pre></div></li><li><p>add your key(s) to authorized keys:</p><p>There are many ways you can do this. You can copy the key directly:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat &lt;path/to/key&gt;.pub &gt;&gt; ~/.ssh/authorized_keys
</span></span></code></pre></div><p>edit the file and paste in the text:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo nano ~/.ssh/authorized_keys
</span></span></code></pre></div><p>or distribute your key to another server with <code>ssh-copy-id</code></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh-copy-id -f -i &lt;path/to/your/key&gt;.pub user@server
</span></span></code></pre></div><p>you can also use a ssh one-liner:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat &lt;path/to/your/key&gt;.pub <span style=color:#111>|</span> <span style=color:#8045ff>\
</span></span></span><span style=display:flex><span><span style=color:#8045ff></span>ssh &lt;user_name&gt;@&lt;hostname-or-ip&gt; <span style=color:#d88200>&#39;cat &gt;&gt; .ssh/authorized_keys&#39;</span>
</span></span></code></pre></div></li></ol><h3 id=update-your-sshconfig-file>update your .ssh/config file</h3><p>These options are useful defaults setting up your client.</p><pre><code>```txt
Host *
    IdentitiesOnly yes
    IdentityFile [path/to/new_file]
    ForwardAgent yes
    AddKeysToAgent yes
    User &lt;user&gt;
```
</code></pre><h2 id=default-permissions>Default Permissions</h2><p>It is important when you work with files related to secure communications, that you make it impossible for others to access your ssh keys and configuration settings</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chmod <span style=color:#ae81ff>700</span> ~/.ssh <span style=color:#75715e># the .ssh directory itself</span>
</span></span><span style=display:flex><span>chmod <span style=color:#ae81ff>600</span> ~/.ssh/* <span style=color:#75715e># by default all the files in .ssh</span>
</span></span><span style=display:flex><span>chmod <span style=color:#ae81ff>644</span> ~/.ssh/*.pub <span style=color:#75715e># change public key permissions</span>
</span></span><span style=display:flex><span>chmod <span style=color:#ae81ff>750</span> <span style=color:#111>$HOME</span>
</span></span></code></pre></div><p><a href=https://superuser.com/questions/215504/permissions-on-private-key-in-ssh-folder>https://superuser.com/questions/215504/permissions-on-private-key-in-ssh-folder</a></p><h2 id=ssh-server>SSH Server</h2><h3 id=installing-openssh-server>Installing OpenSSH Server</h3><p>To accept incoming ssh connections, install <code>openssh-server</code></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install -y openssh-server
</span></span></code></pre></div><h3 id=ssh-server-daemon>SSH server daemon</h3><p><code>systemctl</code> can be used to control your server. To enable the service so that it starts with your computer, type</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl <span style=color:#111>enable</span> ssh 
</span></span></code></pre></div><p>The next time your computer starts, it will start. To start it immediately, type</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl start ssh 
</span></span></code></pre></div><h3 id=other-service-commands>Other service commands</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl stop ssh 
</span></span><span style=display:flex><span>sudo systemctl disable ssh 
</span></span><span style=display:flex><span>sudo systemctl reload ssh 
</span></span><span style=display:flex><span>sudo systemctl restart ssh 
</span></span></code></pre></div><h3 id=server-configuration>Server Configuration</h3><p>Configuring your ssh server is done in the
<code>/etc/ssh/sshd_config</code> file and in the
<code>/etc/ssh/sshd_config.d/</code> directory.</p><p>If your server is running, you can get the current configuration with</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sshd -T
</span></span></code></pre></div><h2 id=working-with-the-key-agent>Working with the key agent</h2><p>ssh-add is the &ldquo;agent&rdquo; that manages the keys currently available to use.</p><h3 id=list-all-keys>list all keys</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh-add -l
</span></span></code></pre></div><h3 id=remove-all-keys>remove all keys</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh-add -D
</span></span></code></pre></div><h2 id=other-related-functions>Other related functions</h2><h3 id=add-passphrase>add passphrase</h3><p>if you want to change the passphrase associated with an existing key</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh-keygen -p -f &lt;path-to-key&gt;
</span></span></code></pre></div><h3 id=create-a-certificate-and-key>create a certificate and key</h3><p>Sometimes, you need to create a certificate at the same time as a key.</p><p>from here: <a href="https://support.microfocus.com/kb/doc.php?id=7013103">https://support.microfocus.com/kb/doc.php?id=7013103</a>:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>openssl req -newkey rsa:2048 -new -nodes -x509 -days <span style=color:#ae81ff>3650</span> -keyout key.pem -out cert.pem
</span></span></code></pre></div><h2 id=external-resources>External Resources</h2><ul><li><a href=https://linuxnatives.net/2019/how-to-create-good-ssh-keys>https://linuxnatives.net/2019/how-to-create-good-ssh-keys</a></li><li><a href=https://www.digitalocean.com/community/tutorials/ssh-essentials-working-with-ssh-servers-clients-and-keys>https://www.digitalocean.com/community/tutorials/ssh-essentials-working-with-ssh-servers-clients-and-keys</a></li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-20-04>https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-20-04</a></li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-configure-ssh-key-based-authentication-on-a-linux-server>https://www.digitalocean.com/community/tutorials/how-to-configure-ssh-key-based-authentication-on-a-linux-server</a></li><li><a href=https://help.ubuntu.com/community/SSH/OpenSSH/Keys>https://help.ubuntu.com/community/SSH/OpenSSH/Keys</a></li><li><a href=https://superuser.com/questions/215504/permissions-on-private-key-in-ssh-folder>https://superuser.com/questions/215504/permissions-on-private-key-in-ssh-folder</a></li><li><a href=https://www.tecmint.com/set-ssh-directory-permissions-in-linux/>https://www.tecmint.com/set-ssh-directory-permissions-in-linux/</a></li><li><a href=https://www.howtogeek.com/168147/add-public-ssh-key-to-remote-server-in-a-single-command/>https://www.howtogeek.com/168147/add-public-ssh-key-to-remote-server-in-a-single-command/</a></li><li><a href=https://linuxhandbook.com/add-ssh-public-key-to-server/>https://linuxhandbook.com/add-ssh-public-key-to-server/</a></li></ul></div></div></div></div></section><footer class=text-capitalize><div class=container><div class="row justify-content-center"><div class="col-12 border-top py-4 text-center"></div><div class="col-lg-4 col-sm-6 mb-5 text-center"><h6 class=mb-4>Contact Me</h6><ul class=list-unstyled><li class=mb-3><i class="ti-location-pin mr-3 text-primary"></i>Arizona, USA</li></li></ul></div><div class="col-lg-4 col-sm-6 mb-5 text-center"><h6 class=mb-4>External</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=https://github.com/danb0b>personal github</a></li><li class=mb-3><a class=text-dark href=https://www.linkedin.com/in/dan-aukes-502995212/>linkedin</a></li></ul></div><div class="col-lg-4 col-sm-6 mb-5 text-center"><h6 class=mb-4>Quick Links</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=https://www.danaukes.com/about/>About</a></li><li class=mb-3><a class=text-dark href=https://idealab-asu.slack.com>IDEAlab Slack</a></li><li class=mb-3><a class=text-dark href=https://www.danaukes.com/contact/>Contact</a></li><li class=mb-3><a class=text-dark href=https://scram-workspace.slack.com>SCRAMbots</a></li><li class=mb-3><a class=text-dark href=https://www.danaukes.com/calendar/>Calendar</a></li><li class=mb-3><a class=text-dark href=https://kaiteki-asu.slack.com>Kaiteki</a></li></ul></div><div class="col-12 mb-5 text-center"><a href=https://www.danaukes.com/><img src=https://www.danaukes.com/da-small.png alt="Dan Aukes"></a></div><div class="col-12 mb-5 text-center"><p>| copyright © 2025 Daniel Aukes. All Rights Reserved. |</p><p><a href=https://github.com/danb0b/danb0b.github.io/edit/master/content/notebook/ssh/ssh-reference.md>Edit this Page</a></p></div></div></div></footer><script>var indexURL="https://www.danaukes.com/index.json"</script><script src=https://www.danaukes.com/plugins/glightbox/js/glightbox.js></script><script src=https://www.danaukes.com/plugins/jQuery/jquery.min.js></script><script src=https://www.danaukes.com/plugins/bootstrap/bootstrap.min.js></script><script src=https://www.danaukes.com/plugins/slick/slick.min.js></script><script src=https://www.danaukes.com/plugins/venobox/venobox.min.js></script><script src=https://www.danaukes.com/plugins/search/fuse.min.js></script><script src=https://www.danaukes.com/plugins/search/mark.js></script><script src=https://www.danaukes.com/plugins/search/search.js></script><script src=https://www.danaukes.com/js/script.min.js></script><script>var lightboxDescription,lightboxVideo,lightboxInlineIframe,lightbox=GLightbox();lightbox.on("open",e=>{console.log("lightbox opened")}),lightboxDescription=GLightbox({selector:".glightbox2"}),lightboxVideo=GLightbox({selector:".glightbox3"}),lightboxVideo.on("slide_changed",({prev:e,current:t})=>{console.log("Prev slide",e),console.log("Current slide",t);const{slideIndex:s,slideNode:o,slideConfig:i,player:n}=t;n&&(n.ready||n.on("ready",e=>{}),n.on("play",e=>{console.log("Started play")}),n.on("volumechange",e=>{console.log("Volume change")}),n.on("ended",e=>{console.log("Video ended")}))}),lightboxInlineIframe=GLightbox({selector:".glightbox4"})</script></body></html>