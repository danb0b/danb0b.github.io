<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Getting the Logitech c930 working with ROS | Dan Aukes </title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Dan Aukes' personal website"><meta name=author content="Dan Aukes"><meta name=generator content="Hugo 0.124.1"><link rel=stylesheet href=https://danaukes.com/plugins/glightbox/css/glightbox.css><link rel=stylesheet href=https://danaukes.com/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://danaukes.com/plugins/slick/slick.css><link rel=stylesheet href=https://danaukes.com/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://danaukes.com/plugins/venobox/venobox.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link rel=stylesheet href=https://danaukes.com/scss/style.min.css media=screen><link rel="shortcut icon" href=https://danaukes.com/images/favicon.png type=image/x-icon><link rel=icon href=https://danaukes.com/images/favicon.png type=image/x-icon><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","","auto"),ga("send","pageview")</script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body><div class=preloader></div><header class=navigation><div class=container><nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom pl-0"><a class="navbar-brand mobile-view" href=https://danaukes.com/><img class=img-fluid src=https://danaukes.com/da-small.png alt="Dan Aukes"></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation>
<i class=ti-menu></i></button><div class="collapse navbar-collapse text-center" id=navigation><div class=desktop-view><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=https://github.com/danb0b><i class=ti-github></i></a></li><li class=nav-item><a class=nav-link href=https://www.linkedin.com/in/dan-aukes-502995212/><i class=ti-linkedin></i></a></li></ul></div><a class="navbar-brand mx-auto desktop-view" href=https://danaukes.com/><img class=img-fluid src=https://danaukes.com/da-small.png alt="Dan Aukes"></a><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://danaukes.com/work-blog/>Work Blog</a></li><li class=nav-item><a class=nav-link href=https://danaukes.com/notebook/>Notebook</a></li><li class=nav-item><a class=nav-link href=https://danaukes.com/travel/>Travel</a></li><li class=nav-item><a class=nav-link href=https://danaukes.com/recipes/>Recipes</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Misc</a><div class=dropdown-menu><a class=dropdown-item href=https://danaukes.com/code/>Code</a>
<a class=dropdown-item href=https://danaukes.com/websites/>Websites</a>
<a class=dropdown-item href=https://danaukes.com/bookmarks/>Bookmarks</a></div></li></ul><form action=https://danaukes.com//search class=d-flex><input class="form-control me-2" id=search-query name=s type=s placeholder=Search aria-label=Search>
<button class="btn btn-outline-success" type=submit><i class="ti-search text-dark"></i></button></form></div></nav></div></header><section class=section-sm><div class=container><div class=row><div class="col-lg-8 mx-auto"><div class=text-center><nav aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=https://danaukes.com/>Welcome</a></li><li class=breadcrumb-item><a href=https://danaukes.com/notebook/>Notebook</a></li><li class=breadcrumb-item><a href=https://danaukes.com/notebook/deprecated/>Deprecated Pages</a></li><li class=breadcrumb-item><a href=https://danaukes.com/notebook/deprecated/ros/>Ros Tutorial</a></li><li class="breadcrumb-item active"><a href=https://danaukes.com/notebook/deprecated/ros/13-logitech-c930e/>Getting the Logitech c930 working with ROS</a></li></ol></nav></div><h2>Getting the Logitech c930 working with ROS</h2><div class="mb-1 post-meta"><span>By Dan Aukes</span></div><ul class=list-inline><li class="list-inline-item mb-3 mr-2 mt-1"><a class="d-block p-2 bg-primary text-white" href=/tags/ros class=text-primary>Ros</a></li><li class="list-inline-item mb-3 mr-2 mt-1"><a class="d-block p-2 bg-primary text-white" href=/tags/ubuntu class=text-primary>Ubuntu</a></li><li class="list-inline-item mb-3 mr-2 mt-1"><a class="d-block p-2 bg-primary text-white" href=/tags/linux class=text-primary>Linux</a></li><li class="list-inline-item mb-3 mr-2 mt-1"><a class="d-block p-2 bg-primary text-white" href=/tags/camera class=text-primary>Camera</a></li></ul><div class="content mb-5"><h1 id=using-a-usb-webcam-with-virtualbox>Using a USB webcam (with virtualbox)</h1><h2 id=introduction>Introduction</h2><p>Making a usb webcam work in Linux AND virtualbox is not as easy as it sounds. These instructions were validated for the C930 Webcam by Logitech. Some steps need to change to make other cameras work. For this tutorial to work, the camera should be &ldquo;UVC compliant&rdquo;</p><p>You need to follow slightly different steps if you want to provide access to a built-in camera on your computer. This is possible but some of the USB-specific instructions will not work, as it won&rsquo;t be necessarily recognized as a usb device using libusb</p><h2 id=instructions>Instructions</h2><ol><li><p>Make sure you have installed the virtualbox extension pack: <a href=https://www.virtualbox.org/wiki/Downloads>https://www.virtualbox.org/wiki/Downloads</a></p></li><li><p>check virtualbox usb settings to ensure usb is set at 3.0 to get high speed working.</p></li><li><p>make sure usb filter is set for usb webcam.</p></li><li><p>make sure your user is part of vboxusers group, per this suggestion (you may have already done this in a previous tutorial): <a href=https://askubuntu.com/questions/4875/how-can-i-use-my-webcam-with-ubuntu-running-in-virtualbox>reference</a></p><ol><li><p>check if your vboxusers displays in this command :</p><pre tabindex=0><code>groups
</code></pre></li><li><p>add yourself</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo usermod -a -G vboxusers <span style=color:#00a8c8>$(</span>whoami<span style=color:#00a8c8>)</span>
</span></span></code></pre></div></li><li><p>Logout & login again , check if your vboxusers displays in this command :</p><pre tabindex=0><code>groups
</code></pre></li></ol></li><li><p>install uvc stuff.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install -y guvcview cheese v4l-utils
</span></span><span style=display:flex><span><span style=color:#75715e># sudo apt install uvccapture uvcdynctrl</span>
</span></span></code></pre></div></li><li><p>try guvcview or cheese to see if you can see video output(may need to install):</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># cheese # only need to try one command</span>
</span></span><span style=display:flex><span>guvcview
</span></span></code></pre></div></li><li><p>install ros package:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install ros-melodic-libuvc-camera
</span></span><span style=display:flex><span><span style=color:#75715e>#ros-melodic-uvc-camera #deprecated</span>
</span></span></code></pre></div></li><li><p>add yourself to video group</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo usermod -a -G video <span style=color:#00a8c8>$(</span>whoami<span style=color:#00a8c8>)</span>
</span></span></code></pre></div></li><li><p>Logout & login again , check if your vboxusers displays in this command</p><pre tabindex=0><code>groups
</code></pre></li><li><p>copy rules from idealab_ros_tools to rules folder (according to this <a href=http://wiki.ros.org/libuvc_camera>ref</a>)</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#111>cd</span> ~/code/code_idealab_ros/src
</span></span><span style=display:flex><span>sudo cp 99-uvc-c930.rules /etc/udev/rules.d/
</span></span><span style=display:flex><span>sudo cp 99-uvc-vboxcam.rules /etc/udev/rules.d/
</span></span><span style=display:flex><span>sudo udevadm control --reload-rules <span style=color:#f92672>&amp;&amp;</span> udevadm trigger
</span></span></code></pre></div></li><li><p>if that doesn&rsquo;t work just</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo chmod <span style=color:#ae81ff>777</span> /dev/bus/usb/001/001
</span></span></code></pre></div><p>where 001 and 002 is the bus and id of the desired usb camera, respectively, which was acquired from the lsusb command.</p></li><li><p>optional step: you can view/edit parameters directly from bash according to <a href=https://www.kurokesu.com/main/2016/01/16/manual-usb-camera-settings-in-linux/>this</a></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>v4l2-ctl --list-devices
</span></span><span style=display:flex><span>v4l2-ctl -d /dev/video0 --list-ctrls
</span></span></code></pre></div><p>this results&mldr;</p><pre tabindex=0><code>                     brightness 0x00980900 (int)    : min=0 max=255 step=1 default=128 value=128
                       contrast 0x00980901 (int)    : min=0 max=255 step=1 default=128 value=128
                     saturation 0x00980902 (int)    : min=0 max=255 step=1 default=128 value=128
 white_balance_temperature_auto 0x0098090c (bool)   : default=1 value=1
                           gain 0x00980913 (int)    : min=0 max=255 step=1 default=0 value=0
           power_line_frequency 0x00980918 (menu)   : min=0 max=2 default=2 value=2
      white_balance_temperature 0x0098091a (int)    : min=2000 max=7500 step=1 default=4000 value=4000 flags=inactive
                      sharpness 0x0098091b (int)    : min=0 max=255 step=1 default=128 value=128
         backlight_compensation 0x0098091c (int)    : min=0 max=1 step=1 default=0 value=0
                  exposure_auto 0x009a0901 (menu)   : min=0 max=3 default=3 value=3
              exposure_absolute 0x009a0902 (int)    : min=3 max=2047 step=1 default=250 value=250 flags=inactive
         exposure_auto_priority 0x009a0903 (bool)   : default=0 value=1
                   pan_absolute 0x009a0908 (int)    : min=-36000 max=36000 step=3600 default=0 value=0
                  tilt_absolute 0x009a0909 (int)    : min=-36000 max=36000 step=3600 default=0 value=0
                 focus_absolute 0x009a090a (int)    : min=0 max=255 step=5 default=0 value=0 flags=inactive
                     focus_auto 0x009a090c (bool)   : default=1 value=1
                  zoom_absolute 0x009a090d (int)    : min=100 max=400 step=1 default=100 value=100
                      led1_mode 0x0a046d05 (menu)   : min=0 max=3 default=0 value=3
                 led1_frequency 0x0a046d06 (int)    : min=0 max=255 step=1 default=0 value=0
</code></pre></li><li><p>(optional) other <a href=http://wiki.ros.org/libuvc_camera#Running_the_driver>steps</a> which might be required</p></li><li><p>Finally, get it working in ros:</p><ol><li><p>in the first window:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>roscore
</span></span></code></pre></div></li><li><p>in window #2:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rosrun libuvc_camera camera_node
</span></span></code></pre></div></li><li><p>in another window (ctrl+shift+t)</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rosrun rqt_image_view rqt_image_view
</span></span></code></pre></div></li></ol></li></ol><h2 id=references>References</h2><ul><li><a href=https://www.virtualbox.org/wiki/Downloads>https://www.virtualbox.org/wiki/Downloads</a></li><li><a href=https://www.kurokesu.com/main/2016/01/16/manual-usb-camera-settings-in-linux/>https://www.kurokesu.com/main/2016/01/16/manual-usb-camera-settings-in-linux/</a></li><li><a href=http://wiki.ros.org/libuvc_camera>http://wiki.ros.org/libuvc_camera</a></li><li><a href=https://askubuntu.com/questions/4875/how-can-i-use-my-webcam-with-ubuntu-running-in-virtualbox>https://askubuntu.com/questions/4875/how-can-i-use-my-webcam-with-ubuntu-running-in-virtualbox</a></li><li><a href=https://msadowski.github.io/ros-web-tutorial-pt2-cameras/>https://msadowski.github.io/ros-web-tutorial-pt2-cameras/</a></li></ul><h2 id=other-helpful-commands>Other helpful commands</h2><pre tabindex=0><code># list usb devices with verbose option
lsusb -v
# list usb devices
lsusb
# list usb messages
dmesg
</code></pre></div></div></div></div></section><footer class=text-capitalize><div class=container><div class="row justify-content-center"><div class="col-12 border-top py-4 text-center"></div><div class="col-lg-4 col-sm-6 mb-5 text-center"><h6 class=mb-4>Contact Me</h6><ul class=list-unstyled><li class=mb-3><i class="ti-location-pin mr-3 text-primary"></i>Arizona, USA</li></li></ul></div><div class="col-lg-4 col-sm-6 mb-5 text-center"><h6 class=mb-4>External</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=https://github.com/danb0b>personal github</a></li><li class=mb-3><a class=text-dark href=https://www.linkedin.com/in/dan-aukes-502995212/>linkedin</a></li></ul></div><div class="col-lg-4 col-sm-6 mb-5 text-center"><h6 class=mb-4>Quick Links</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=https://danaukes.com/about/>About</a></li><li class=mb-3><a class=text-dark href=https://idealab-asu.slack.com>IDEAlab Slack</a></li><li class=mb-3><a class=text-dark href=https://danaukes.com/contact/>Contact</a></li><li class=mb-3><a class=text-dark href=https://scram-workspace.slack.com>SCRAMbots</a></li><li class=mb-3><a class=text-dark href=https://danaukes.com/calendar/>Calendar</a></li><li class=mb-3><a class=text-dark href=https://kaiteki-asu.slack.com>Kaiteki</a></li></ul></div><div class="col-12 mb-5 text-center"><a href=https://danaukes.com/><img src=https://danaukes.com/da-small.png alt="Dan Aukes"></a></div><div class="col-12 mb-5 text-center"><p>| copyright Â© 2023 Daniel Aukes. All Rights Reserved. |</p><p><a href=https://github.com/danb0b/danb0b.github.io/edit/master/content/notebook/deprecated/ros/13-logitech-c930e.md>Edit this Page</a></p></div></div></div></footer><script>var indexURL="https://danaukes.com/index.json"</script><script src=https://danaukes.com/plugins/glightbox/js/glightbox.js></script><script src=https://danaukes.com/plugins/jQuery/jquery.min.js></script><script src=https://danaukes.com/plugins/bootstrap/bootstrap.min.js></script><script src=https://danaukes.com/plugins/slick/slick.min.js></script><script src=https://danaukes.com/plugins/venobox/venobox.min.js></script><script src=https://danaukes.com/plugins/search/fuse.min.js></script><script src=https://danaukes.com/plugins/search/mark.js></script><script src=https://danaukes.com/plugins/search/search.js></script><script src=https://danaukes.com/js/script.min.js></script><script>var lightbox=GLightbox(),lightboxDescription,lightboxVideo,lightboxInlineIframe;lightbox.on("open",e=>{console.log("lightbox opened")}),lightboxDescription=GLightbox({selector:".glightbox2"}),lightboxVideo=GLightbox({selector:".glightbox3"}),lightboxVideo.on("slide_changed",({prev:e,current:t})=>{console.log("Prev slide",e),console.log("Current slide",t);const{slideIndex:s,slideNode:o,slideConfig:i,player:n}=t;n&&(n.ready||n.on("ready",e=>{}),n.on("play",e=>{console.log("Started play")}),n.on("volumechange",e=>{console.log("Volume change")}),n.on("ended",e=>{console.log("Video ended")}))}),lightboxInlineIframe=GLightbox({selector:".glightbox4"})</script></body></html>