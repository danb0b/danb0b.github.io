<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Navigating the Ros Filesystem (optional) | Dan Aukes </title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Dan Aukes' personal website"><meta name=author content="Dan Aukes"><meta name=generator content="Hugo 0.122.0"><link rel=stylesheet href=https://www.danaukes.com/plugins/glightbox/css/glightbox.css><link rel=stylesheet href=https://www.danaukes.com/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://www.danaukes.com/plugins/slick/slick.css><link rel=stylesheet href=https://www.danaukes.com/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://www.danaukes.com/plugins/venobox/venobox.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><link rel=stylesheet href=https://www.danaukes.com/scss/style.min.css media=screen><link rel="shortcut icon" href=https://www.danaukes.com/images/favicon.png type=image/x-icon><link rel=icon href=https://www.danaukes.com/images/favicon.png type=image/x-icon><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","","auto"),ga("send","pageview")</script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body><div class=preloader></div><header class=navigation><div class=container><nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom pl-0"><a class="navbar-brand mobile-view" href=https://www.danaukes.com><img class=img-fluid src=https://www.danaukes.com/da-small.png alt="Dan Aukes"></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation>
<i class=ti-menu></i></button><div class="collapse navbar-collapse text-center" id=navigation><div class=desktop-view><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=https://github.com/danb0b><i class=ti-github></i></a></li><li class=nav-item><a class=nav-link href=https://www.linkedin.com/in/dan-aukes-502995212/><i class=ti-linkedin></i></a></li></ul></div><a class="navbar-brand mx-auto desktop-view" href=https://www.danaukes.com><img class=img-fluid src=https://www.danaukes.com/da-small.png alt="Dan Aukes"></a><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://www.danaukes.com/work-blog/>Work Blog</a></li><li class=nav-item><a class=nav-link href=https://www.danaukes.com/notebook/>Notebook</a></li><li class=nav-item><a class=nav-link href=https://www.danaukes.com/travel/>Travel</a></li><li class=nav-item><a class=nav-link href=https://www.danaukes.com/recipes/>Recipes</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Misc</a><div class=dropdown-menu><a class=dropdown-item href=https://www.danaukes.com/code/>Code</a>
<a class=dropdown-item href=https://www.danaukes.com/websites/>Websites</a>
<a class=dropdown-item href=https://www.danaukes.com/bookmarks/>Bookmarks</a></div></li></ul><form action=https://www.danaukes.com/search class=d-flex><input class="form-control me-2" id=search-query name=s type=s placeholder=Search aria-label=Search>
<button class="btn btn-outline-success" type=submit><i class="ti-search text-dark"></i></button></form></div></nav></div></header><section class=section-sm><div class=container><div class=row><div class="col-lg-8 mx-auto"><div class=text-center><nav aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=https://www.danaukes.com/>Welcome</a></li><li class=breadcrumb-item><a href=https://www.danaukes.com/notebook/>Notebook</a></li><li class=breadcrumb-item><a href=https://www.danaukes.com/notebook/deprecated/>Deprecated Pages</a></li><li class=breadcrumb-item><a href=https://www.danaukes.com/notebook/deprecated/ros/>Ros Tutorial</a></li><li class="breadcrumb-item active"><a href=https://www.danaukes.com/notebook/deprecated/ros/03-ros-usage/>Navigating the Ros Filesystem (optional)</a></li></ol></nav></div><h2>Navigating the Ros Filesystem (optional)</h2><div class="mb-1 post-meta"><span>By Dan Aukes</span></div><ul class=list-inline><li class="list-inline-item mb-3 mr-2 mt-1"><a class="d-block p-2 bg-primary text-white" href=/tags/ros class=text-primary>Ros</a></li><li class="list-inline-item mb-3 mr-2 mt-1"><a class="d-block p-2 bg-primary text-white" href=/tags/ubuntu class=text-primary>Ubuntu</a></li><li class="list-inline-item mb-3 mr-2 mt-1"><a class="d-block p-2 bg-primary text-white" href=/tags/linux class=text-primary>Linux</a></li></ul><div class="content mb-5"><p>From <a href=https://wiki.ros.org/ROS/Tutorials/NavigatingTheFilesystem>here</a></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#sudo apt install -y ros-&lt;distro&gt;-ros-tutorials</span>
</span></span><span style=display:flex><span>sudo apt install -y ros-melodic-ros-tutorials
</span></span><span style=display:flex><span><span style=color:#75715e>#rospack find [package_name]</span>
</span></span><span style=display:flex><span>rospack find roscpp
</span></span><span style=display:flex><span><span style=color:#75715e>#roscd [locationname[/subdir]]</span>
</span></span><span style=display:flex><span>roscd roscpp
</span></span><span style=display:flex><span><span style=color:#75715e>#print the working directory using the Unix command</span>
</span></span><span style=display:flex><span><span style=color:#111>pwd</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#To see what is in your ROS_PACKAGE_PATH, type:</span>
</span></span><span style=display:flex><span><span style=color:#111>echo</span> <span style=color:#111>$ROS_PACKAGE_PATH</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#roscd can also move to a subdirectory of a package or stack.  Try:</span>
</span></span><span style=display:flex><span>roscd roscpp/cmake
</span></span><span style=display:flex><span><span style=color:#111>pwd</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#roscd log will take you to the folder where ROS stores log files. Note that if you have not run any ROS programs yet, this will yield an error saying that it does not yet exist.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#If you have run some ROS program before, try:</span>
</span></span><span style=display:flex><span>roscd log
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#rosls is part of the rosbash suite. It allows you to ls directly in a package by name rather than by absolute path.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#rosls [locationname[/subdir]]</span>
</span></span><span style=display:flex><span>rosls roscpp_tutorials
</span></span></code></pre></div><h2 id=create-a-package>Create A Package</h2><p>From <a href=https://wiki.ros.org/ROS/Tutorials/CreatingPackage>here</a></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># You should have created this in the Creating a Workspace Tutorial</span>
</span></span><span style=display:flex><span><span style=color:#111>cd</span> ~/catkin_ws/src
</span></span><span style=display:flex><span><span style=color:#75715e># catkin_create_pkg &lt;package_name&gt; [depend1] [depend2] [depend3]</span>
</span></span><span style=display:flex><span>catkin_create_pkg beginner_tutorials std_msgs rospy roscpp
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Now you need to build the packages in the catkin workspace:</span>
</span></span><span style=display:flex><span><span style=color:#111>cd</span> ~/catkin_ws
</span></span><span style=display:flex><span>catkin_make
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#To add the workspace to your ROS environment you need to source the generated setup file:</span>
</span></span><span style=display:flex><span>. ~/catkin_ws/devel/setup.bash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#first-order dependencies can now be reviewed with the rospack tool.</span>
</span></span><span style=display:flex><span>rospack depends1 beginner_tutorials
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#dependencies for a package are stored in the package.xml file:</span>
</span></span><span style=display:flex><span>roscd beginner_tutorials
</span></span><span style=display:flex><span>cat package.xml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#In many cases, a dependency will also have its own dependencies. For instance, rospy has other dependencies.</span>
</span></span><span style=display:flex><span>rospack depends1 rospy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#rospack can recursively determine all nested dependencies.</span>
</span></span><span style=display:flex><span>rospack depends beginner_tutorials
</span></span></code></pre></div><p>open up package.xml and check whether there is an exec_depend tag for each of the dependencies in package.xml as in <a href=https://wiki.ros.org/ROS/Tutorials/CreatingPackage#ROS.2BAC8-Tutorials.2BAC8-catkin.2BAC8-CreatingPackage.Final_package.xml>the tutorial</a></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>  <span style=color:#f92672>&lt;buildtool_depend&gt;</span>catkin<span style=color:#f92672>&lt;/buildtool_depend&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;build_depend&gt;</span>roscpp<span style=color:#f92672>&lt;/build_depend&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;build_depend&gt;</span>rospy<span style=color:#f92672>&lt;/build_depend&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;build_depend&gt;</span>std_msgs<span style=color:#f92672>&lt;/build_depend&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;exec_depend&gt;</span>roscpp<span style=color:#f92672>&lt;/exec_depend&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;exec_depend&gt;</span>rospy<span style=color:#f92672>&lt;/exec_depend&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;exec_depend&gt;</span>std_msgs<span style=color:#f92672>&lt;/exec_depend&gt;</span>
</span></span></code></pre></div><h2 id=build-a-ros-package>Build a ROS Package</h2><p>from <a href=https://wiki.ros.org/ROS/Tutorials/BuildingPackages>here</a></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#source your environment setup file if you have not already</span>
</span></span><span style=display:flex><span><span style=color:#75715e># source /opt/ros/%YOUR_ROS_DISTRO%/setup.bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e># this has been added to bashrc so is not necessary</span>
</span></span><span style=display:flex><span><span style=color:#111>source</span> /opt/ros/melodic/setup.bash
</span></span><span style=display:flex><span><span style=color:#75715e># In a catkin workspace</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#catkin_make [make_targets] [-DCMAKE_VARIABLES=...]</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#catkin_make -DPYTHON_EXECUTABLE=/usr/bin/python3</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#catkin_make</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#catkin_make install #optional</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#If your source code is in a different place, say my_src then you would call catkin_make like this:</span>
</span></span><span style=display:flex><span><span style=color:#75715e># In a catkin workspace</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#catkin_make --source my_src</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#catkin_make install --source my_src  # (optionally)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>cd</span> ~/catkin_ws/
</span></span><span style=display:flex><span>ls src
</span></span><span style=display:flex><span>catkin_make
</span></span></code></pre></div><h2 id=running-ros>Running ROS</h2><p>From <a href=https://wiki.ros.org/ROS/Tutorials/UnderstandingNodes>here</a></p><ol><li><p>In Terminal 1 (ctrl+alt+t)</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>roscore
</span></span></code></pre></div></li><li><p>Open up a new terminal tab (ctrl+shift+t)</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rosnode list
</span></span><span style=display:flex><span>rosnode info /rosout
</span></span></code></pre></div></li><li><p>Open up a new terminal tab (ctrl+shift+t)</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#rosrun [package_name] [node_name]</span>
</span></span><span style=display:flex><span>rosrun turtlesim turtlesim_node
</span></span></code></pre></div></li><li><p>In terminal 2(ctrl+pg_up):</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rosnode list
</span></span></code></pre></div></li><li><p>In terminal 3(ctrl+pg_dn):</p><ol><li>ctrl+c</li><li><code>rosrun turtlesim turtlesim_node __name:=my_turtle</code></li></ol></li><li><p>In terminal 2(ctrl+pg_up):</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rosnode list
</span></span></code></pre></div></li></ol><h2 id=understanding-topics>Understanding Topics</h2><p>See the <a href=https://wiki.ros.org/ROS/Tutorials/UnderstandingTopics>tutorial</a></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#run ros</span>
</span></span><span style=display:flex><span>roscore
</span></span></code></pre></div><p>in a new terminal</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rosrun turtlesim turtlesim_node
</span></span></code></pre></div><p>in a new terminal:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rosrun turtlesim turtle_teleop_key
</span></span></code></pre></div><p>in a new terminal:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rosrun rqt_graph rqt_graph
</span></span></code></pre></div><p>in a new terminal:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># list all commands within rostopic</span>
</span></span><span style=display:flex><span>rostopic -h
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#how to subscribe to and print a topic</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#rostopic echo [topic]</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#rostopic echo [topic]</span>
</span></span><span style=display:flex><span>rostopic <span style=color:#111>echo</span> /turtle1/cmd_vel
</span></span></code></pre></div><p>in a new terminal:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># list full details</span>
</span></span><span style=display:flex><span>rostopic list -v
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># list publishers of</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#rostopic list -p [topic]</span>
</span></span><span style=display:flex><span>rostopic list -p /turtle1/cmd_vel
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#list subscribers to</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#rostopic list -s [topic]</span>
</span></span><span style=display:flex><span>rostopic list -s /turtle1/cmd_vel
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># list message type</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#rostopic type [topic]</span>
</span></span><span style=display:flex><span>rostopic <span style=color:#111>type</span> /turtle1/cmd_vel
</span></span><span style=display:flex><span><span style=color:#75715e># returns geometry_msgs/Twist</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#message type details</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#rosmsg show [msg]</span>
</span></span><span style=display:flex><span>rosmsg show geometry_msgs/Twist
</span></span></code></pre></div><p>More details <a href=https://wiki.ros.org/ROS/Tutorials/UnderstandingTopics#rostopic_continued>here</a></p><h2 id=understanding-services-and-parameters>Understanding Services and Parameters</h2><p>See the <a href=https://wiki.ros.org/ROS/Tutorials/UnderstandingServicesParams>tutorial</a></p><h2 id=rqtconsole-and-roslaunch>RQTConsole and ROSLaunch</h2><p>From this <a href=https://wiki.ros.org/ROS/Tutorials/UsingRqtconsoleRoslaunch>tutorial</a></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#roslaunch starts nodes as defined in a launch file.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#roslaunch [package] [filename.launch]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#you will need to source the environment setup file like you did at the end of the create_a_workspace tutorial:</span>
</span></span><span style=display:flex><span><span style=color:#111>cd</span> ~/catkin_ws
</span></span><span style=display:flex><span><span style=color:#111>source</span> devel/setup.bash
</span></span><span style=display:flex><span>roscd beginner_tutorials
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Then let&#39;s make a launch directory:</span>
</span></span><span style=display:flex><span>mkdir launch
</span></span><span style=display:flex><span><span style=color:#111>cd</span> launch
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#111>echo</span> <span style=color:#d88200>&#34;&lt;launch&gt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  &lt;group ns=\&#34;turtlesim1\&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>    &lt;node pkg=\&#34;turtlesim\&#34; name=\&#34;sim\&#34; type=\&#34;turtlesim_node\&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>  &lt;/group&gt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  &lt;group ns=\&#34;turtlesim2\&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>    &lt;node pkg=\&#34;turtlesim\&#34; name=\&#34;sim\&#34; type=\&#34;turtlesim_node\&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>  &lt;/group&gt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>  &lt;node pkg=\&#34;turtlesim\&#34; name=\&#34;mimic\&#34; type=\&#34;mimic\&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>    &lt;remap from=\&#34;input\&#34; to=\&#34;turtlesim1/turtle1\&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>    &lt;remap from=\&#34;output\&#34; to=\&#34;turtlesim2/turtle1\&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>  &lt;/node&gt;
</span></span></span><span style=display:flex><span><span style=color:#d88200>
</span></span></span><span style=display:flex><span><span style=color:#d88200>&lt;/launch&gt;&#34;</span> &gt;&gt; turtlemimic.launch
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>roslaunch beginner_tutorials turtlemimic.launch
</span></span></code></pre></div><p>in a new terminal</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rostopic pub /turtlesim1/turtle1/cmd_vel geometry_msgs/Twist -r <span style=color:#ae81ff>1</span> -- <span style=color:#d88200>&#39;[2.0, 0.0, 0.0]&#39;</span> <span style=color:#d88200>&#39;[0.0, 0.0, -1.8]&#39;</span>
</span></span></code></pre></div><p>in a new terminal</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#rqt</span>
</span></span><span style=display:flex><span>rqt_graph
</span></span></code></pre></div><h2 id=creating-a-message-and-service>Creating a Message and Service</h2><p>From this <a href=https://wiki.ros.org/ROS/Tutorials/CreatingMsgAndSrv>tutorial</a></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#111>cd</span> ~/catkin_ws
</span></span><span style=display:flex><span><span style=color:#111>source</span> devel/setup.bash
</span></span><span style=display:flex><span>roscd beginner_tutorials
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mkdir msg
</span></span><span style=display:flex><span><span style=color:#111>echo</span> <span style=color:#d88200>&#34;int64 num
</span></span></span><span style=display:flex><span><span style=color:#d88200>string first_name
</span></span></span><span style=display:flex><span><span style=color:#d88200>string last_name
</span></span></span><span style=display:flex><span><span style=color:#d88200>uint8 age
</span></span></span><span style=display:flex><span><span style=color:#d88200>uint32 score&#34;</span> &gt; msg/Num.msg
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nano package.xml
</span></span></code></pre></div><p>add these lines:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>  <span style=color:#f92672>&lt;build_depend&gt;</span>message_generation<span style=color:#f92672>&lt;/build_depend&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;exec_depend&gt;</span>message_runtime<span style=color:#f92672>&lt;/exec_depend&gt;</span>
</span></span></code></pre></div><p>save and exit</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano CMakeLists.txt
</span></span></code></pre></div><p>Add the message_generation dependency to the find_package call which already exists in your CMakeLists.txt so that you can generate messages. You can do this by simply adding message_generation to the list of COMPONENTS such that it looks like this:</p><pre tabindex=0><code># Do not just add this to your CMakeLists.txt, modify the existing text to add message_generation before the closing parenthesis
find_package(catkin REQUIRED COMPONENTS
   roscpp
   rospy
   std_msgs
   message_generation
)
</code></pre><p>Also make sure you export the message runtime dependency.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>catkin_package(
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>  CATKIN_DEPENDS message_runtime ...
</span></span><span style=display:flex><span>  ...)
</span></span></code></pre></div><p>Find the following block of code:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span># add_message_files(
</span></span><span style=display:flex><span>#   FILES
</span></span><span style=display:flex><span>#   Message1.msg
</span></span><span style=display:flex><span>#   Message2.msg
</span></span><span style=display:flex><span># )
</span></span></code></pre></div><p>Uncomment it by removing the # symbols and then replace the stand in Message*.msg files with your .msg file, such that it looks like this:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>add_message_files(
</span></span><span style=display:flex><span>  FILES
</span></span><span style=display:flex><span>  Num.msg
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>By adding the .msg files manually, we make sure that CMake knows when it has to reconfigure the project after you add other .msg files.</p><p>Now we must ensure the generate_messages() function is called.</p><p>For ROS Hydro and later, you need to uncomment these lines:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span># generate_messages(
</span></span><span style=display:flex><span>#   DEPENDENCIES
</span></span><span style=display:flex><span>#   std_msgs
</span></span><span style=display:flex><span># )
</span></span></code></pre></div><p>so it looks like:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>generate_messages(
</span></span><span style=display:flex><span>  DEPENDENCIES
</span></span><span style=display:flex><span>  std_msgs
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#rosmsg show [message type]</span>
</span></span><span style=display:flex><span>rosmsg show beginner_tutorials/Num
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Now that we have made some new messages we need to make our package again:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># In your catkin workspace</span>
</span></span><span style=display:flex><span>roscd beginner_tutorials
</span></span><span style=display:flex><span><span style=color:#111>cd</span> ../..
</span></span><span style=display:flex><span>catkin_make install
</span></span><span style=display:flex><span><span style=color:#111>cd</span> -
</span></span></code></pre></div><h2 id=simple-publisher-and-subscriber-python>Simple Publisher and Subscriber (Python)</h2><p>From <a href=https://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber%28python%29>here</a></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#111>cd</span> ~/catkin_ws
</span></span><span style=display:flex><span><span style=color:#111>source</span> devel/setup.bash
</span></span><span style=display:flex><span>roscd beginner_tutorials
</span></span><span style=display:flex><span>mkdir scripts
</span></span><span style=display:flex><span><span style=color:#111>cd</span> scripts
</span></span><span style=display:flex><span>wget https://raw.github.com/ros/ros_tutorials/kinetic-devel/rospy_tutorials/001_talker_listener/talker.py
</span></span><span style=display:flex><span>chmod +x talker.py
</span></span><span style=display:flex><span>roscd beginner_tutorials/scripts/
</span></span><span style=display:flex><span>wget https://raw.github.com/ros/ros_tutorials/kinetic-devel/rospy_tutorials/001_talker_listener/listener.py
</span></span><span style=display:flex><span>chmod +x listener.py
</span></span><span style=display:flex><span><span style=color:#111>cd</span> ~/catkin_ws
</span></span><span style=display:flex><span>catkin_make
</span></span></code></pre></div><h2 id=examining-publisher-and-subscriber>Examining Publisher and Subscriber</h2><p>From <a href=https://wiki.ros.org/ROS/Tutorials/ExaminingPublisherSubscriber>here</a></p><p>Make sure that a roscore is up and running:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>roscore
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># In your catkin workspace</span>
</span></span><span style=display:flex><span><span style=color:#111>cd</span> ~/catkin_ws
</span></span><span style=display:flex><span><span style=color:#111>source</span> ./devel/setup.bash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#In the last tutorial we made a publisher called &#34;talker&#34;. Let&#39;s run it:</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#rosrun beginner_tutorials talker      (C++)</span>
</span></span><span style=display:flex><span>rosrun beginner_tutorials talker.py  <span style=color:#75715e># (Python)</span>
</span></span></code></pre></div><p>In another terminal:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#rosrun beginner_tutorials listener     (C++)</span>
</span></span><span style=display:flex><span>rosrun beginner_tutorials listener.py  <span style=color:#75715e>#(Python)</span>
</span></span></code></pre></div><h2 id=recording-data-creating-a-bag-file>Recording data (creating a bag file)</h2><ol><li><p>In Terminal 1:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>roscore
</span></span></code></pre></div></li><li><p>In Terminal 2:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rosrun turtlesim turtlesim_node
</span></span></code></pre></div></li><li><p>In Terminal 3:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rosrun turtlesim turtle_teleop_key
</span></span></code></pre></div></li><li><p>Start Recording. In Terminal 4:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rostopic list -v
</span></span><span style=display:flex><span>mkdir ~/bagfiles
</span></span><span style=display:flex><span><span style=color:#111>cd</span> ~/bagfiles
</span></span><span style=display:flex><span>rosbag record -a -O test.bag --duration<span style=color:#f92672>=</span>10s
</span></span><span style=display:flex><span><span style=color:#75715e>#Wait ten seconds</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Examine your bagfile</span>
</span></span><span style=display:flex><span>rosbag info test.bag
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Play back at twice the rate</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#rosbag play -r 2 &lt;your bagfile&gt;</span>
</span></span><span style=display:flex><span>rosbag play -r <span style=color:#ae81ff>2</span> test.bag
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>rosbag record -O subset.bag --duration /turtle1/cmd_vel /turtle1/pose
</span></span><span style=display:flex><span>rosbag info subset.bag
</span></span></code></pre></div></li></ol></div></div></div></div></section><footer class=text-capitalize><div class=container><div class="row justify-content-center"><div class="col-12 border-top py-4 text-center"></div><div class="col-lg-4 col-sm-6 mb-5 text-center"><h6 class=mb-4>Contact Me</h6><ul class=list-unstyled><li class=mb-3><i class="ti-location-pin mr-3 text-primary"></i>Arizona, USA</li></li></ul></div><div class="col-lg-4 col-sm-6 mb-5 text-center"><h6 class=mb-4>External</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=https://github.com/danb0b>personal github</a></li><li class=mb-3><a class=text-dark href=https://www.linkedin.com/in/dan-aukes-502995212/>linkedin</a></li></ul></div><div class="col-lg-4 col-sm-6 mb-5 text-center"><h6 class=mb-4>Quick Links</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=https://www.danaukes.com/about/>About</a></li><li class=mb-3><a class=text-dark href=https://idealab-asu.slack.com>IDEAlab Slack</a></li><li class=mb-3><a class=text-dark href=https://www.danaukes.com/contact/>Contact</a></li><li class=mb-3><a class=text-dark href=https://scram-workspace.slack.com>SCRAMbots</a></li><li class=mb-3><a class=text-dark href=https://www.danaukes.com/calendar/>Calendar</a></li><li class=mb-3><a class=text-dark href=https://kaiteki-asu.slack.com>Kaiteki</a></li></ul></div><div class="col-12 mb-5 text-center"><a href=https://www.danaukes.com><img src=https://www.danaukes.com/da-small.png alt="Dan Aukes"></a></div><div class="col-12 mb-5 text-center"><p>| copyright © 2023 Daniel Aukes. All Rights Reserved. |</p><p><a href=https://github.com/danb0b/danb0b.github.io/edit/master/content/notebook/deprecated/ros/03-ros-usage.md>Edit this Page</a></p></div></div></div></footer><script>var indexURL="https://www.danaukes.com/index.json"</script><script src=https://www.danaukes.com/plugins/glightbox/js/glightbox.js></script><script src=https://www.danaukes.com/plugins/jQuery/jquery.min.js></script><script src=https://www.danaukes.com/plugins/bootstrap/bootstrap.min.js></script><script src=https://www.danaukes.com/plugins/slick/slick.min.js></script><script src=https://www.danaukes.com/plugins/venobox/venobox.min.js></script><script src=https://www.danaukes.com/plugins/search/fuse.min.js></script><script src=https://www.danaukes.com/plugins/search/mark.js></script><script src=https://www.danaukes.com/plugins/search/search.js></script><script src=https://www.danaukes.com/js/script.min.js></script><script>var lightbox=GLightbox(),lightboxDescription,lightboxVideo,lightboxInlineIframe;lightbox.on("open",e=>{console.log("lightbox opened")}),lightboxDescription=GLightbox({selector:".glightbox2"}),lightboxVideo=GLightbox({selector:".glightbox3"}),lightboxVideo.on("slide_changed",({prev:e,current:t})=>{console.log("Prev slide",e),console.log("Current slide",t);const{slideIndex:s,slideNode:o,slideConfig:i,player:n}=t;n&&(n.ready||n.on("ready",e=>{}),n.on("play",e=>{console.log("Started play")}),n.on("volumechange",e=>{console.log("Volume change")}),n.on("ended",e=>{console.log("Video ended")}))}),lightboxInlineIframe=GLightbox({selector:".glightbox4"})</script></body></html>